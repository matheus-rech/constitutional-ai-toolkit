<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Constitutional War Games - Strategic Scenario Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, monospace;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            padding: 20px;
            color: #eee;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: rgba(255,0,0,0.1);
            border: 2px solid #ff0000;
            border-radius: 12px;
        }

        h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            color: #ff4444;
            text-shadow: 0 0 10px #ff0000;
            font-weight: 900;
            letter-spacing: 3px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #aaa;
            font-family: 'Courier New', monospace;
        }

        .classification {
            margin-top: 15px;
            padding: 8px 20px;
            background: #ff0000;
            color: white;
            display: inline-block;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            letter-spacing: 2px;
        }

        .card {
            background: rgba(30,30,50,0.9);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            margin-bottom: 30px;
            border: 1px solid #444;
        }

        h2 {
            color: #ff4444;
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 2px solid #ff0000;
            padding-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        h3 {
            color: #ff8844;
            margin: 25px 0 15px 0;
            font-size: 1.4rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .scenario-card {
            background: rgba(50,50,70,0.6);
            border: 2px solid #555;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .scenario-card:hover {
            border-color: #ff4444;
            background: rgba(70,70,90,0.8);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255,68,68,0.3);
        }

        .scenario-card.selected {
            border-color: #ff4444;
            background: rgba(255,68,68,0.2);
        }

        .scenario-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ff8844;
            margin-bottom: 10px;
        }

        .scenario-description {
            color: #ccc;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        label {
            display: block;
            font-weight: 600;
            color: #ff8844;
            margin: 20px 0 8px 0;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
        }

        select, textarea, input {
            width: 100%;
            padding: 12px;
            background: rgba(30,30,50,0.8);
            border: 2px solid #444;
            border-radius: 6px;
            color: #eee;
            font-size: 1rem;
            font-family: inherit;
        }

        select:focus, textarea:focus, input:focus {
            outline: none;
            border-color: #ff4444;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        button {
            background: linear-gradient(135deg, #ff0000 0%, #cc0000 100%);
            color: white;
            border: 2px solid #ff4444;
            padding: 15px 35px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255,0,0,0.5);
            background: linear-gradient(135deg, #cc0000 0%, #ff0000 100%);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            text-align: center;
            padding: 30px;
            display: none;
        }

        .loading.show {
            display: block;
        }

        .spinner {
            border: 4px solid #333;
            border-top: 4px solid #ff0000;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .output {
            display: none;
            background: rgba(20,20,30,0.95);
            padding: 30px;
            margin-top: 30px;
            border: 2px solid #ff0000;
            border-radius: 8px;
        }

        .output.show {
            display: block;
        }

        .output-section {
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(40,40,60,0.6);
            border-left: 4px solid #ff4444;
            border-radius: 4px;
        }

        .output-section h3 {
            color: #ff4444;
            margin-bottom: 15px;
        }

        .output-section pre {
            color: #ccc;
            line-height: 1.8;
            white-space: pre-wrap;
            font-family: inherit;
        }

        .info-box {
            background: rgba(33,150,243,0.1);
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .warning-box {
            background: rgba(255,152,0,0.1);
            border-left: 4px solid #ff9800;
            padding: 20px;
            margin: 20px 0;
            border-radius: 4px;
        }

        .threat-level {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.9rem;
            margin-right: 10px;
        }

        .threat-high { background: #ff0000; color: white; }
        .threat-medium { background: #ff9800; color: white; }
        .threat-low { background: #4caf50; color: white; }

        @media (max-width: 768px) {
            h1 {
                font-size: 2rem;
            }
            .grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>‚öîÔ∏è CONSTITUTIONAL WAR GAMES</h1>
            <p class="subtitle">Strategic Scenario Simulation & Analysis</p>
            <div class="classification">UNCLASSIFIED // FOR SIMULATION ONLY</div>
        </header>

        <div class="card">
            <h2>Mission Brief</h2>

            <div class="info-box">
                <strong>Objective:</strong> Generate strategic war game scenarios to test constitutional
                resilience, value conflicts, and decision-making under pressure. War games simulate
                adversarial dynamics, strategic competition, and conflict scenarios to understand
                constitutional principles under stress.
            </div>

            <div class="warning-box">
                <strong>Scope:</strong> This tool generates CONSTITUTIONAL war games - focusing on
                governance, values, rights, and institutional stress during conflict scenarios.
                Not traditional military tactics, but constitutional/political strategy.
            </div>

            <h3>What Are Constitutional War Games?</h3>

            <div style="line-height: 1.8; color: #ccc; margin: 15px 0;">
                <p>War games that explore:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Value Conflicts</strong> - Rights vs security, privacy vs safety</li>
                    <li><strong>Institutional Stress</strong> - Democracy under attack, emergency powers</li>
                    <li><strong>Adversarial Dynamics</strong> - Nation states, AI systems, ideologies competing</li>
                    <li><strong>Strategic Decisions</strong> - Constitutional compromises under pressure</li>
                    <li><strong>Game Theory</strong> - Nash equilibria, prisoner's dilemmas, coordination games</li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>Scenario Configuration</h2>

            <h3>Select War Game Type</h3>

            <div class="grid">
                <div class="scenario-card" onclick="selectScenario('cyber')">
                    <div class="scenario-title">üíª Cyber Conflict</div>
                    <div class="scenario-description">
                        AI-powered cyber attacks on critical infrastructure. Privacy vs security.
                        Digital rights during wartime.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="threat-level threat-high">HIGH THREAT</span>
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario('ai-arms')">
                    <div class="scenario-title">ü§ñ AI Arms Race</div>
                    <div class="scenario-description">
                        Nations compete in autonomous weapons development. International law vs sovereignty.
                        Preemptive strike dilemmas.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="threat-level threat-high">HIGH THREAT</span>
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario('information')">
                    <div class="scenario-title">üì° Information Warfare</div>
                    <div class="scenario-description">
                        Deepfakes, propaganda, election interference. Free speech vs national security.
                        Truth in democracy crisis.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="threat-level threat-medium">MEDIUM THREAT</span>
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario('bio')">
                    <div class="scenario-title">üß¨ Biotech Competition</div>
                    <div class="scenario-description">
                        Gene editing for military advantage. Human rights vs competitive pressure.
                        Genetic inequality escalation.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="threat-level threat-high">HIGH THREAT</span>
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario('resource')">
                    <div class="scenario-title">‚õèÔ∏è Resource Crisis</div>
                    <div class="scenario-description">
                        Climate refugees, water wars, rare earth competition. Property rights vs survival.
                        Humanitarian law under pressure.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="threat-level threat-medium">MEDIUM THREAT</span>
                    </div>
                </div>

                <div class="scenario-card" onclick="selectScenario('constitutional-crisis')">
                    <div class="scenario-title">‚öñÔ∏è Constitutional Crisis</div>
                    <div class="scenario-description">
                        Emergency powers, martial law, suspension of rights. Rule of law vs existential threat.
                        Democratic backsliding simulation.
                    </div>
                    <div style="margin-top: 10px;">
                        <span class="threat-level threat-high">HIGH THREAT</span>
                    </div>
                </div>
            </div>

            <label for="players">Number of Players/Factions:</label>
            <select id="players">
                <option value="2">2 (Bilateral)</option>
                <option value="3">3 (Triangular)</option>
                <option value="4">4 (Quadrilateral)</option>
                <option value="5+">5+ (Multilateral)</option>
            </select>

            <label for="duration">Scenario Duration:</label>
            <select id="duration">
                <option value="hours">Hours (Acute Crisis)</option>
                <option value="days">Days (Rapid Escalation)</option>
                <option value="weeks">Weeks (Strategic Campaign)</option>
                <option value="months">Months (Protracted Conflict)</option>
                <option value="years">Years (Long War)</option>
            </select>

            <label for="customDetails">Additional Context (Optional):</label>
            <textarea id="customDetails" placeholder="E.g., 'Focus on judicial independence under pressure' or 'Include economic sanctions warfare'"></textarea>

            <button onclick="generateWarGame()" id="generateBtn">
                ‚öîÔ∏è GENERATE WAR GAME SCENARIO
            </button>

            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p style="color: #ff8844;">Simulating strategic scenario...</p>
            </div>

            <div class="output" id="output"></div>
        </div>

        <div class="card">
            <h2>War Game Mechanics</h2>

            <h3>Game Theory Elements</h3>
            <div style="color: #ccc; line-height: 1.8; margin-top: 15px;">
                <p><strong>Prisoner's Dilemma:</strong> Cooperate on AI safety vs defect for advantage</p>
                <p><strong>Coordination Games:</strong> Align on international standards vs go solo</p>
                <p><strong>Chicken/Hawk-Dove:</strong> Escalate vs de-escalate in crises</p>
                <p><strong>Stag Hunt:</strong> Trust in collective action vs guaranteed but inferior solo path</p>
            </div>

            <h3>Victory Conditions</h3>
            <div style="color: #ccc; line-height: 1.8; margin-top: 15px;">
                <ul style="margin-left: 20px;">
                    <li>Constitutional integrity maintained</li>
                    <li>Rights protected despite pressure</li>
                    <li>Democratic institutions survive</li>
                    <li>International norms upheld</li>
                    <li>Population trust preserved</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        let selectedScenario = null;

        function selectScenario(type) {
            selectedScenario = type;
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        async function generateWarGame() {
            if (!selectedScenario) {
                alert('Please select a war game type');
                return;
            }

            const players = document.getElementById('players').value;
            const duration = document.getElementById('duration').value;
            const customDetails = document.getElementById('customDetails').value;

            const scenarioDescriptions = {
                'cyber': 'AI-powered cyber warfare targeting critical infrastructure with constitutional privacy vs security tradeoffs',
                'ai-arms': 'Autonomous weapons arms race between nations with preemptive strike dilemmas and international law conflicts',
                'information': 'Information warfare with deepfakes and propaganda threatening democratic processes and free speech',
                'bio': 'Biotech military competition with gene editing creating genetic inequality and human rights conflicts',
                'resource': 'Resource scarcity crisis with climate refugees and water wars testing property rights and humanitarian law',
                'constitutional-crisis': 'Constitutional crisis with emergency powers threatening democratic institutions and rule of law'
            };

            const btn = document.getElementById('generateBtn');
            const loading = document.getElementById('loading');
            const output = document.getElementById('output');

            btn.disabled = true;
            loading.classList.add('show');
            output.classList.remove('show');

            const prompt = `You are a constitutional war game designer and strategic analyst. Create a detailed war game scenario with the following parameters:

SCENARIO TYPE: ${scenarioDescriptions[selectedScenario]}
NUMBER OF PLAYERS: ${players}
DURATION: ${duration}
ADDITIONAL CONTEXT: ${customDetails || 'None'}

Generate a comprehensive war game that includes:

1. SCENARIO SETUP
   - Initial conditions and trigger event
   - Key actors and their objectives
   - Constitutional/legal framework at stake

2. PLAYERS/FACTIONS
   - For each player: interests, capabilities, constraints
   - Constitutional values each faction prioritizes
   - Win conditions for each faction

3. GAME MECHANICS
   - Turn structure (how does time progress?)
   - Decision points (what choices do players make?)
   - Game theory dynamics (prisoner's dilemma, coordination games, etc.)
   - Victory/defeat conditions

4. CONSTITUTIONAL STRESS POINTS
   - Which rights are under pressure?
   - What institutional checks are tested?
   - Where do values conflict?
   - What are the constitutional dilemmas?

5. SCENARIO PROGRESSION
   - Phase 1: Initial moves (first 1/3 of timeline)
   - Phase 2: Escalation and crisis (middle 1/3)
   - Phase 3: Resolution or collapse (final 1/3)
   - Key decision nodes in each phase

6. STRATEGIC DILEMMAS
   - Specific constitutional choices players must make
   - Trade-offs between security and rights
   - International cooperation vs national interest
   - Short-term survival vs long-term principles

7. SIMULATION PARAMETERS
   - Variables to model (with ranges)
   - Metrics to track
   - How to measure constitutional resilience

8. LESSONS/INSIGHTS
   - What constitutional principles does this test?
   - What can we learn about governance under pressure?
   - Historical parallels or case studies

Be specific, concrete, and focused on CONSTITUTIONAL and GOVERNANCE challenges, not just military tactics. This is about testing democratic institutions, rights, and values under strategic competition and conflict.`;

            try {
                const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${getApiKey()}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: prompt
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }

                const data = await response.json();
                const scenario = data.candidates[0].content.parts[0].text;

                displayWarGame(scenario);

            } catch (error) {
                console.error('Error:', error);
                alert('Error generating war game: ' + error.message);
            } finally {
                btn.disabled = false;
                loading.classList.remove('show');
            }
        }

        function displayWarGame(text) {
            const output = document.getElementById('output');
            output.textContent = '';

            const header = document.createElement('div');
            header.style.textAlign = 'center';
            header.style.marginBottom = '30px';
            header.style.paddingBottom = '20px';
            header.style.borderBottom = '2px solid #ff0000';

            const title = document.createElement('h2');
            title.textContent = 'WAR GAME SCENARIO';
            title.style.color = '#ff0000';
            title.style.marginBottom = '10px';
            header.appendChild(title);

            const classification = document.createElement('div');
            classification.className = 'classification';
            classification.textContent = 'UNCLASSIFIED // SIMULATION ONLY';
            header.appendChild(classification);

            output.appendChild(header);

            const section = document.createElement('div');
            section.className = 'output-section';

            const content = document.createElement('pre');
            content.textContent = text;
            section.appendChild(content);

            output.appendChild(section);

            const downloadBtn = document.createElement('button');
            downloadBtn.textContent = 'üì• DOWNLOAD SCENARIO';
            downloadBtn.onclick = function() {
                const fullText = 'CONSTITUTIONAL WAR GAME SCENARIO\n' +
                                'UNCLASSIFIED // FOR SIMULATION ONLY\n' +
                                'Generated: ' + new Date().toLocaleString() + '\n\n' +
                                '=' .repeat(60) + '\n\n' +
                                text;
                const blob = new Blob([fullText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `war-game-${Date.now()}.txt`;
                a.click();
                URL.revokeObjectURL(url);
            };
            output.appendChild(downloadBtn);

            output.classList.add('show');
            output.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
    </script>
</body>
</html>
